#!/bin/bash

#to run it: ./bash_corri.sh
#to have the permission to run it: chmod +x bash_corri.sh

BASEDIR="${HOME}/Desktop/hihi/KTH/XY-model"

#input parameters
nsteps=50000
transient=10000
tau=32
restart=0
K=5.0
J1=1.0
J2=0.0
e=0.1
theta_box=0.78539816339

BASEDIR_OUT="${HOME}/Desktop/hihi/KTH/XY-model/Relative_fluctuations/K=5/Output_L="
DIR_IN=${BASEDIR_OUT}

EXCUTE_DIR=${BASEDIR}/build/release-conan-apple-clang
L_LIST="8 12 16 20 24 32 40 48"
#L_LIST=""

#2.5 2.4 2.3 2.2 2.1 2.0 1.7 1.5 1.45 1.4 1.3 1.27 1.25 1.22 1.2 1.17 1.15 1.13 1.1 1.09  1.07 1.06
 #   1.05 1.04 1.02 1.0 0.98 0.96 0.95 0.94 0.92 0.9 0.87 0.85 0.82 0.8 0.77 0.75 0.72 0.7 0.67 0.65 0.62

#T_LIST=" 1.0 0.98 0.96 0.95 0.94 0.92 0.9 0.87 0.85 0.82 0.8 0.77 0.75 0.72 0.7 0.67 0.65 0.62
 #     0.6 0.59 0.58 0.57 0.56 0.55 0.53 0.52 0.51 0.5 0.49 0.48 0.475 0.47 0.465 0.46 0.455 0.45
  #    0.448 0.446 0.444 0.442 0.44 0.438 0.436 0.434 0.432 0.43 0.428 0.426 0.424 0.422 0.42 0.415 0.41 0.405 0.4
   #   0.39 0.37 0.36 0.35 0.32 0.3"

#T_LIST="0.46 0.4595 0.459 0.4585 0.458 0.4575 0.457 0.4565 0.456 0.4555 0.455 0.4545 0.454 0.4535
#        0.453 0.4525 0.452 0.4515 0.451 0.4505 0.45 0.4495 0.449 0.4485 0.448 0.4475 0.447 0.4465
#        0.446 0.4455 0.445 0.4445 0.444 0.4435 0.443 0.4425 0.442 0.4415 0.441 0.4405 0.44 0.4395
#        0.439 0.4385 0.438 0.4375 0.437 0.4365 0.436 0.4355 0.435 0.4345 0.434 0.4335 0.433 0.4325
#        0.432 0.4315 0.431 0.4305 0.43 0.428 0.426 0.424 0.422 0.42 0.415 0.41 0.405 0.4"

T_LIST="0.6 0.598 0.596 0.594 0.592 0.59 0.588 0.586 0.584 0.582 0.58 0.578 0.576 0.574 0.572 0.57
        0.568 0.566 0.564 0.562 0.56 0.558 0.556 0.554 0.552 0.55 0.548 0.546 0.544 0.542 0.54 0.538
        0.536 0.534 0.532 0.53 0.528 0.526 0.524 0.522 0.52 0.518 0.516 0.514 0.512 0.51 0.508 0.506 0.504 0.502 0.5"


for L in ${L_LIST}; do

  for T in ${T_LIST}; do

      if [ ! -d ${BASEDIR_OUT}${L}/ST_${T} ]; then
          mkdir -p ${BASEDIR_OUT}${L}/T_${T}
      fi

      DIR_OUT="${BASEDIR_OUT}${L}/T_${T}"

      ${EXCUTE_DIR}/CMT ${L} ${nsteps} ${transient} ${tau} ${T} ${restart} ${K} ${J1} ${J2} ${e} ${theta_box} ${DIR_IN} ${DIR_OUT}

      restart=1
      DIR_IN=${DIR_OUT}

  done
done

